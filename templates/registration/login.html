{% extends "base.html" %}
{% load static %}

{% block title %}Iniciar Sesión{% endblock %}

{% block extra_css %}
<style>
  :root{
    --bg:#070708;
    --card:#0f1720;
    --muted:#9aa2ac;
    --accent:#ffc107;
    --accent-2:#e0a800;
    --radius:12px;
  }

  body { background: linear-gradient(180deg,#050506 0%, #0b0b0c 100%); }

  .login-wrap {
    min-height: calc(100vh - 120px);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:2.5rem 1rem;
  }

  .login-card {
    width:100%;
    max-width:480px;
    background-color: rgba(15, 23, 30, 0.70);
    border-radius: var(--radius);
    padding:2rem;
    color:#fff;
    box-shadow: 0 14px 40px rgba(2,6,23,0.7);
    border:1px solid rgba(255,255,255,0.03);
    position:relative;
  }

  .brand {
    display:flex;
    gap:.75rem;
    align-items:center;
    justify-content:center;
    margin-bottom:.85rem;
  }
  .brand img { height:56px; width:auto; border-radius:10px; padding:6px; background:rgba(255,255,255,0.02); box-shadow: 0 6px 18px rgba(0,0,0,0.6); }
  .brand h1 { margin:0; font-size:1.05rem; font-weight:800; letter-spacing:-0.02em; color:#fff; }
  .brand p { margin:0; color:var(--muted); font-size:.78rem; }

  .login-header { text-align:center; margin-bottom:1rem; }
  .login-header h2 { margin:0; font-size:1.45rem; font-weight:800; color:#fff; }
  .login-header small { display:block; color:var(--muted); margin-top:.35rem; }

  .form-group { margin-bottom:1rem; }
  .form-label { display:block; margin-bottom:.35rem; color:var(--muted); font-size:.9rem; }

  /* inputs: applied generically */
  .login-card input[type="text"],
  .login-card input[type="password"],
  .login-card input[type="email"] {
    width:100%;
    padding:12px 14px;
    height:48px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.06);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    color:#fff;
    transition: box-shadow .12s ease, border-color .12s ease, transform .06s ease;
    outline:none;
    font-size: .95rem;
  }
  .login-card input::placeholder { color: rgba(255,255,255,0.45); }
  .login-card input:focus {
    border-color: var(--accent);
    box-shadow: 0 8px 28px rgba(255,193,7,0.08), 0 0 0 6px rgba(255,193,7,0.06);
    transform: translateY(-1px);
  }

  /* password toggle */
  .pwd-wrap { position:relative; }
  .pwd-toggle-btn {
    position:absolute; right:8px; top:50%; transform:translateY(-50%);
    border:none; background:transparent; color:var(--muted); padding:6px; cursor:pointer;
  }

  .btn-primary-strong {
    width:100%;
    height:50px;
    border-radius:10px;
    border:none;
    font-weight:800;
    background: linear-gradient(90deg,var(--accent), var(--accent-2));
    color:#111;
    box-shadow: 0 10px 26px rgba(224,168,0,0.14), inset 0 -2px 0 rgba(255,255,255,0.03);
    transition: transform .12s ease;
  }
  .btn-primary-strong:hover { transform: translateY(-3px); }

  .helper-links { margin-top:.8rem; display:flex; justify-content:space-between; align-items:center; gap:10px; color:var(--muted); font-size:.9rem; }
  .helper-links a { color:var(--muted); text-decoration:none; }
  .helper-links a:hover { color:#fff; text-decoration:underline; }

  .divider { display:flex; align-items:center; gap:12px; margin:1.1rem 0; }
  .divider::before,.divider::after{ content:""; flex:1; height:1px; background:rgba(255,255,255,0.04); }
  .divider span{ color:var(--muted); font-size:.85rem; }

  .small-note { margin-top:.9rem; color:var(--muted); font-size:.85rem; text-align:center; }

  @media (max-width:480px) {
    .login-card{ padding:1.15rem; }
    .brand img{ height:48px; }
    .login-header h2{ font-size:1.2rem; }
  }
</style>
{% endblock %}

{% block content %}
<div class="container login-wrap">
  <main class="login-card" role="main" aria-labelledby="loginTitle">
    <div class="brand" aria-hidden="true">
      <img src="{% static 'img/logo22.png' %}" alt="Logo">
      <div>
        <h1>Pacific Reef</h1>
        <p>Panel de reservas</p>
      </div>
    </div>

    <header class="login-header">
      <h2 id="loginTitle">Iniciar sesión</h2>
      <small>Accede para administrar tus reservas</small>
    </header>

    <form method="post" novalidate>
      {% csrf_token %}

      {% if form.non_field_errors %}
        {% for error in form.non_field_errors %}
          <div class="alert alert-danger" role="alert">{{ error }}</div>
        {% endfor %}
      {% endif %}

      <div class="form-group">
        <label class="form-label" for="{{ form.username.id_for_label }}">Usuario</label>
        {{ form.username }}
      </div>

      <div class="form-group pwd-wrap">
        <label class="form-label" for="{{ form.password.id_for_label }}">Contraseña</label>
        {{ form.password }}
        <button type="button" class="pwd-toggle-btn" id="pwdToggle" aria-label="Mostrar contraseña">Mostrar</button>
      </div>

      <div class="helper-links">
        <label class="remember"><input type="checkbox" name="remember" style="margin-right:6px;"> Mantener sesión</label>
        <a href="{% url 'password_reset' %}">¿Olvidaste tu contraseña?</a>
      </div>

      <div style="margin-top:1rem;">
        <button type="submit" class="btn-primary-strong">Iniciar Sesión</button>
      </div>

      <div class="divider"><span>o</span></div>

      <p class="small-note">¿No tienes cuenta? <a href="{% url 'register' %}" style="color:var(--accent); font-weight:700; text-decoration:none;">Regístrate</a></p>
    </form>
  </main>
</div>

<script>
  // script simple para mostrar/ocultar password y mejorar UX
  (function(){
    // intenta buscar por id del widget de django o por name "password"
    const pwdInput = document.querySelector('input[type="password"], input[name="password"], #id_password');
    const toggle = document.getElementById('pwdToggle');
    if (!pwdInput || !toggle) return;

    toggle.addEventListener('click', function(){
      if (pwdInput.type === 'password') {
        pwdInput.type = 'text';
        toggle.textContent = 'Ocultar';
      } else {
        pwdInput.type = 'password';
        toggle.textContent = 'Mostrar';
      }
      pwdInput.focus();
    });
  })();
</script>
{% endblock %}